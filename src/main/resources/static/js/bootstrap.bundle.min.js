/*!
  * Bootstrap v5.3.0 (简化版)
  */
(function(){
  'use strict';

  // 警告框关闭功能
  document.addEventListener('DOMContentLoaded', function() {
    var closeButtons = document.querySelectorAll('.btn-close');
    closeButtons.forEach(function(button) {
      button.addEventListener('click', function() {
        var alert = this.closest('.alert');
        if (alert) {
          alert.style.display = 'none';
        }
      });
    });
  });

  // 导航栏折叠功能
  document.addEventListener('DOMContentLoaded', function() {
    var togglers = document.querySelectorAll('[data-bs-toggle="collapse"]');
    togglers.forEach(function(toggler) {
      toggler.addEventListener('click', function() {
        var target = document.querySelector(this.getAttribute('data-bs-target'));
        if (target) {
          if (target.classList.contains('show')) {
            target.classList.remove('show');
          } else {
            target.classList.add('show');
          }
        }
      });
    });
  });

  // 下拉菜单功能
  document.addEventListener('DOMContentLoaded', function() {
    var dropdownToggles = document.querySelectorAll('[data-bs-toggle="dropdown"]');
    dropdownToggles.forEach(function(toggle) {
      toggle.addEventListener('click', function(event) {
        event.preventDefault();
        event.stopPropagation();
        var dropdown = this.nextElementSibling;
        if (dropdown && dropdown.classList.contains('dropdown-menu')) {
          dropdown.classList.toggle('show');
        }
      });
    });

    document.addEventListener('click', function(event) {
      var dropdownMenus = document.querySelectorAll('.dropdown-menu.show');
      dropdownMenus.forEach(function(menu) {
        if (!menu.contains(event.target)) {
          menu.classList.remove('show');
        }
      });
    });
  });

  // Modal弹窗功能
  document.addEventListener('DOMContentLoaded', function() {
    var modalToggles = document.querySelectorAll('[data-bs-toggle="modal"]');
    modalToggles.forEach(function(toggle) {
      toggle.addEventListener('click', function() {
        var targetId = this.getAttribute('data-bs-target');
        var modal = document.querySelector(targetId);
        if (modal && modal.classList.contains('modal')) {
          modal.style.display = 'block';
          modal.classList.add('show');
        }
      });
    });

    var closeButtons = document.querySelectorAll('[data-bs-dismiss="modal"]');
    closeButtons.forEach(function(button) {
      button.addEventListener('click', function() {
        var modal = this.closest('.modal');
        if (modal) {
          modal.style.display = 'none';
          modal.classList.remove('show');
        }
      });
    });
  });

  // 表单验证
  document.addEventListener('DOMContentLoaded', function() {
    var forms = document.querySelectorAll('.needs-validation');
    forms.forEach(function(form) {
      form.addEventListener('submit', function(event) {
        if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  });
})(); 